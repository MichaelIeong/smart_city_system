{"ast":null,"code":"import { getAccessToken } from '@/api/login';\nimport storage from 'store';\nimport { AUTHORIZATION } from '@/store/mutation-types';\nexport default {\n  beforeCreate: function beforeCreate() {\n    this.form = this.$form.createForm(this, {\n      name: 'normal_login'\n    });\n  },\n  methods: {\n    handleSubmit: function handleSubmit(e) {\n      var _this = this;\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          var params = {\n            username: values.userName,\n            password: values.password\n          };\n          var hide = _this.$message.loading('正在登录..', 0);\n          getAccessToken(params).then(function (res) {\n            setTimeout(hide, 2500);\n            _this.$notification['success']({\n              message: '提示',\n              description: '你的AccessToken为：' + res.access,\n              duration: 8\n            });\n            storage.set(AUTHORIZATION, 'Bearer' + ' ' + res.access, 7 * 24 * 60 * 60 * 1000);\n            _this.$router.push({\n              path: '/'\n            });\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["getAccessToken","storage","AUTHORIZATION","beforeCreate","form","$form","createForm","name","methods","handleSubmit","e","_this","preventDefault","validateFields","err","values","console","log","params","username","userName","password","hide","$message","loading","then","res","setTimeout","$notification","message","description","access","duration","set","$router","push","path"],"sources":["src/views/user/IoTLogin.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n  <a-form id=\"components-form-demo-normal-login\" :form=\"form\" class=\"login-form\" @submit=\"handleSubmit\">\n    <a-form-item>\n      <a-input\n      v-decorator=\"[\n    'userName',\n    { rules: [{ required: true, message: 'Please input your username!' }] },\n    ]\"\n    placeholder=\"Username\">\n        <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25)\" />\n      </a-input>\n    </a-form-item>\n    <a-form-item>\n      <a-input\n      v-decorator=\"[\n    'password',\n    { rules: [{ required: true, message: 'Please input your Password!' }] },\n  ]\"\n  type=\"password\"\n  placeholder=\"Password\">\n        <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\n      </a-input>\n    </a-form-item>\n    <a-form-item>\n      <a-checkbox\n      v-decorator=\"[\n    'remember',\n    {\n      valuePropName: 'checked',\n      initialValue: true,\n    },\n  ]\">\n        Remember me\n      </a-checkbox>\n      <a class=\"login-form-forgot\" href=\"\">\n        Forgot password\n      </a>\n      <a-button type=\"primary\" html-type=\"submit\" class=\"login-form-button\">\n        Log in\n      </a-button>\n      Or\n      <a href=\"\">\n        register now!\n      </a>\n    </a-form-item>\n  </a-form>\n</div>\n</template>\n<script>\n\nimport { getAccessToken } from '@/api/login'\nimport storage from 'store'\nimport { AUTHORIZATION } from '@/store/mutation-types'\n\nexport default {\n  beforeCreate () {\n    this.form = this.$form.createForm(this, { name: 'normal_login' })\n  },\n  methods: {\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values)\n          var params = {\n            username: values.userName,\n            password: values.password\n          }\n          const hide = this.$message.loading('正在登录..', 0)\n          getAccessToken(params)\n            .then(res => {\n              setTimeout(hide, 2500)\n              this.$notification['success']({\n                message: '提示',\n                description: '你的AccessToken为：' + res.access,\n                duration: 8\n              })\n              storage.set(AUTHORIZATION, 'Bearer' + ' ' + res.access, 7 * 24 * 60 * 60 * 1000)\n              this.$router.push({ path: '/' })\n            })\n          }\n      })\n    }\n  }\n}\n</script>\n<style>\n#components-form-demo-normal-login .login-form {\n  max-width: 300px;\n}\n\n#components-form-demo-normal-login .login-form-forgot {\n  float: right;\n}\n\n#components-form-demo-normal-login .login-form-button {\n  width: 100%;\n}\n</style>\n"],"mappings":"AAmDA,SAAAA,cAAA;AACA,OAAAC,OAAA;AACA,SAAAC,aAAA;AAEA;EACAC,YAAA,WAAAA,aAAA;IACA,KAAAC,IAAA,QAAAC,KAAA,CAAAC,UAAA;MAAAC,IAAA;IAAA;EACA;EACAC,OAAA;IACAC,YAAA,WAAAA,aAAAC,CAAA;MAAA,IAAAC,KAAA;MACAD,CAAA,CAAAE,cAAA;MACA,KAAAR,IAAA,CAAAS,cAAA,WAAAC,GAAA,EAAAC,MAAA;QACA,KAAAD,GAAA;UACAE,OAAA,CAAAC,GAAA,8BAAAF,MAAA;UACA,IAAAG,MAAA;YACAC,QAAA,EAAAJ,MAAA,CAAAK,QAAA;YACAC,QAAA,EAAAN,MAAA,CAAAM;UACA;UACA,IAAAC,IAAA,GAAAX,KAAA,CAAAY,QAAA,CAAAC,OAAA;UACAxB,cAAA,CAAAkB,MAAA,EACAO,IAAA,WAAAC,GAAA;YACAC,UAAA,CAAAL,IAAA;YACAX,KAAA,CAAAiB,aAAA;cACAC,OAAA;cACAC,WAAA,sBAAAJ,GAAA,CAAAK,MAAA;cACAC,QAAA;YACA;YACA/B,OAAA,CAAAgC,GAAA,CAAA/B,aAAA,mBAAAwB,GAAA,CAAAK,MAAA;YACApB,KAAA,CAAAuB,OAAA,CAAAC,IAAA;cAAAC,IAAA;YAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}