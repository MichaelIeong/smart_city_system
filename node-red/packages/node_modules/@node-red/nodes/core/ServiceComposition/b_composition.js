module.exports = function (RED) {
    "use strict";

    function CompositionNode(n) {
        RED.nodes.createNode(this, n);
        var node = this;
        this.services = n.services;
        this.location = n.location;
        this.compositionName = n.compositionName;

        this.on("input", function (msg, send, done) {
            // 将节点信息加入 msg 中
            var newMsg = {
                compositionName: node.compositionName,
                services: node.services,
                location: node.location
            };
            Object.assign(newMsg, msg);
            send(newMsg);
            done();
        });
    }

    RED.nodes.registerType("composition", CompositionNode);
};