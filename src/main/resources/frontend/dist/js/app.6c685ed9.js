(function(){"use strict";var e={2482:function(e,t,i){var o=i(144),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("application")],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("h1",[e._v(e._s(e.msg))]),e._m(0),t("h3",[e._v("Installed CLI Plugins")]),t("ul"),t("h3",[e._v("Essential Links")]),e._m(1),t("h3",[e._v("Ecosystem")]),e._m(2)])},r=[function(){var e=this,t=e._self._c;return t("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),t("br"),e._v(" check out the "),t("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e._self._c;return t("ul",[t("li",[t("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),t("li",[t("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),t("li",[t("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),t("li",[t("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),t("li",[t("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e._self._c;return t("ul",[t("li",[t("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),t("li",[t("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),t("li",[t("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],s={name:"HelloWorld",props:{msg:String}},c=s,u=i(1001),m=(0,u.Z)(c,l,r,!1,null,"574af232",null),p=m.exports,d=function(){var e=this,t=e._self._c;return t("el-container",[t("el-main",[t("h1",[e._v(" Scenario-Centric TAP ")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[t("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("UPLOAD")])],1),t("el-dialog",{attrs:{title:"UPLOAD CONFIGURATION",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"user name",prop:"user"}},[t("el-input",{attrs:{placeholder:"user name"},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),t("el-form-item",{attrs:{label:"app name",prop:"app"}},[t("el-select",{attrs:{placeholder:"app name",filterable:""},model:{value:e.form.app,callback:function(t){e.$set(e.form,"app",t)},expression:"form.app"}},e._l(e.appOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.upload}},[e._v("Confirm")])],1)],1),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12}},[t("triggerEditor",{ref:"trigger",model:{value:e.triggerList,callback:function(t){e.triggerList=t},expression:"triggerList"}})],1),t("el-col",{attrs:{span:12}},[t("actionEditor",{ref:"action",attrs:{computedResultList:e.computedResultList},model:{value:e.actionList,callback:function(t){e.actionList=t},expression:"actionList"}})],1),e.hasHistory?t("el-col",{attrs:{span:24}},[t("el-card",[t("h3"),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("historyEventEditor",{ref:"history",model:{value:e.historyEventList,callback:function(t){e.historyEventList=t},expression:"historyEventList"}})],1),t("el-col",{attrs:{span:12}},[t("computedResultEditor",{ref:"computing",attrs:{historyEventList:e.historyEventList},model:{value:e.computedResultList,callback:function(t){e.computedResultList=t},expression:"computedResultList"}})],1)],1)],1)],1):e._e()],1)],1)],1)},_=[];const v=[{value:"Noisy_Detected",label:"Noisy_Detected"},{value:"Water_Leak",label:"Water_Leak"},{value:"Order_Delivered",label:"Order_Delivered"},{value:"Coffee_Start_making",label:"Coffee_Start_making"},{value:"Coffee_Done",label:"Coffee_Done"},{value:"Make_Order",label:"Make_Order"},{value:"Check_Out",label:"Check_Out"},{value:"Person_Leave",label:"Person_Leave"},{value:"Person_Entry",label:"Person_Entry"},{value:"Temperature_Change",label:"Temperature_Change"},{value:"AC_Off",label:"AC_Off"},{value:"AC_On",label:"AC_On"},{value:"Window_Off",label:"Window_Off"},{value:"Window_On",label:"Window_On"},{value:"Light_Off",label:"Light_Off"},{value:"Light_On",label:"Light_On"}],f=[{value:"Speak_VoiceMessage",label:"Speak_VoiceMessage"},{value:"Make_Coffee",label:"Make_Coffee"},{value:"Light_Turn_Off",label:"Light_Turn_Off"},{value:"Light_Turn_On",label:"Light_Turn_On"},{value:"AC_Turn_Off",label:"AC_Turn_Off"},{value:"AC_Turn_On",label:"AC_Turn_On"},{value:"Make_Drink",label:"Make_Drink"},{value:"Guiding",label:"Guiding"},{value:"Notify_Waiter",label:"Notify_Waiter"}],h=[{value:"trigger_location",label:"trigger_location"},{value:"DiningArea05",label:"DiningArea05"},{value:"DiningArea04",label:"DiningArea04"},{value:"DiningArea03",label:"DiningArea03"},{value:"DiningArea02",label:"DiningArea02"},{value:"DiningArea01",label:"DiningArea01"},{value:"WorkArea01",label:"WorkArea01"},{value:"LeisureArea01",label:"LeisureArea01"},{value:"EntranceArea02",label:"EntranceArea02"},{value:"EntranceArea01",label:"EntranceArea01"},{value:"DiningArea",label:"DiningArea"},{value:"WorkArea",label:"WorkArea"},{value:"LeisureArea",label:"LeisureArea"},{value:"EntranceArea",label:"EntranceArea"}],b=[{value:"location",label:"location"},{value:"temperature",label:"temperature"}],g=[{value:"speaker",label:"speaker",children:[{value:"volume",label:"volume"}]},{value:"window",label:"window",children:[{value:"current_window_state",label:"current_window_state"}]},{value:"ac",label:"ac",children:[{value:"current_ac_state",label:"current_ac_state"}]},{value:"light",label:"light",children:[{value:"current_light_state",label:"current_light_state"}]},{value:"Coffee_Machine",label:"Coffee_Machine",children:[{value:"current_Coffee_Machine_state",label:"current_Coffee_Machine_state"}]},{value:"Deliver_Robot",label:"Deliver_Robot",children:[{value:"current_Deliver_Robot_state",label:"current_Deliver_Robot_state"}]},{value:"Guiding_Robot",label:"Guiding_Robot",children:[{value:"current_Guiding_Robot_state",label:"current_Guiding_Robot_state"}]}],w=[{value:"temperature",label:"temperature"},{value:"people_count",label:"people_count"},{value:"luminance",label:"luminance"},{value:"any",label:"any",children:g},{value:"all",label:"all",children:g}],y=[{value:"overwork",label:"overwork"},{value:"printer add paper",label:"printer add paper"},{value:"autolight",label:"autolight"},{value:"turn on AC",label:"turn on AC"},{value:"light overuse",label:"light overuse"},{value:"AC/Window conflict",label:"AC/Window conflict"},{value:"fast run",label:"fast run"},{value:"fire detect",label:"fire detect"},{value:"unusual behavior",label:"unusual behavior"},{value:"oven&water dispenser",label:"oven&water dispenser"},{value:"security check",label:"security check"}],k=[{value:"is",label:"is"},{value:"contain",label:"contain"},{value:"adjacentTo",label:"adjacentTo"},{value:"reachableTo",label:"reachableTo"}],O=[{value:"trigger_objectId",label:"trigger_objectId"},{value:"vip",label:"vip"}],L=[{value:"count",label:"count"},{value:"time",label:"time"},{value:"seq_match",label:"seq_match"}],x=[{value:">",label:">"},{value:"<",label:"<"},{value:"=",label:"="}],I=[{value:"and",label:"and"},{value:"or",label:"or"}],$=[{value:"is",label:"is"},{value:"isNot",label:"isNot"},{value:"belongsTo",label:"belongsTo"},{value:"notBelongsTo",label:"notBelongsTo"}];var T=function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"title"},[e._v("Trigger")]),t("el-alert",{attrs:{title:"Select perception events as triggers according to time, location and object.",type:"success",closable:!1}}),e._l(e.resultList,(function(i,o){return t("div",{key:o},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"Trigger "+(o+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.openEditor(i,o)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(o)}}})],1),t("el-descriptions-item",{attrs:{label:"event_type"}},[e._v(e._s(i.event_type[0]))]),t("el-descriptions-item",{attrs:{label:"filter"}},[e._v(e._s(i.filter))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openEditor()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add Trigger")])]),t("el-dialog",{attrs:{title:"Trigger",visible:e.dialogEditorVisible},on:{"update:visible":function(t){e.dialogEditorVisible=t},close:e.cancelUpdateItem}},[t("el-form",{attrs:{model:e.item_now,"label-width":"auto"}},[t("el-form-item",{attrs:{label:"event_type"}},[t("el-cascader",{attrs:{options:e.eventTypeNameOptions,filterable:"",props:{expandTrigger:"hover"},placeholder:"event type"},on:{change:function(e){}},model:{value:e.item_now.event_type,callback:function(t){e.$set(e.item_now,"event_type",t)},expression:"item_now.event_type"}})],1),t("el-dropdown",{on:{command:e.handleCommand}},[t("span",[e._v(" add filter"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"location"}},[e._v("location")]),t("el-dropdown-item",{attrs:{command:"timestamp"}},[e._v("timestamp")]),t("el-dropdown-item",{attrs:{command:"objectId"}},[e._v("objectId")]),t("el-dropdown-item",{attrs:{command:"eventData"}},[e._v("eventData")])],1)],1),e.item_now.filterList.includes("location")?t("el-form-item",{attrs:{label:"location"}},[t("LocationInput",{model:{value:e.item_now.rawFilter.location,callback:function(t){e.$set(e.item_now.rawFilter,"location",t)},expression:"item_now.rawFilter.location"}})],1):e._e(),e.item_now.filterList.includes("timestamp")?t("el-form-item",{attrs:{label:"timestamp"}},[t("span",[t("el-select",{attrs:{placeholder:"comparator"},model:{value:e.item_now.rawFilter.timestamp.comparator,callback:function(t){e.$set(e.item_now.rawFilter.timestamp,"comparator",t)},expression:"item_now.rawFilter.timestamp.comparator"}},e._l(e.comparatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-time-picker",{attrs:{placeholder:"time","value-format":"HH:mm:ss"},model:{value:e.item_now.rawFilter.timestamp.value,callback:function(t){e.$set(e.item_now.rawFilter.timestamp,"value",t)},expression:"item_now.rawFilter.timestamp.value"}})],1)]):e._e(),e.item_now.filterList.includes("objectId")?t("el-form-item",{attrs:{label:"objectId"}},[t("span",[t("el-select",{attrs:{placeholder:"objectIdOperator",filterable:""},model:{value:e.item_now.rawFilter.objectIdOperator,callback:function(t){e.$set(e.item_now.rawFilter,"objectIdOperator",t)},expression:"item_now.rawFilter.objectIdOperator"}},e._l(e.objectIdOperatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"objectId",filterable:""},model:{value:e.item_now.rawFilter.objectId,callback:function(t){e.$set(e.item_now.rawFilter,"objectId",t)},expression:"item_now.rawFilter.objectId"}},e._l(e.objectIdOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):e._e(),e.item_now.filterList.includes("eventData")?t("el-form-item",[t("span",[t("el-select",{attrs:{placeholder:"eventData",filterable:""},model:{value:e.item_now.rawFilter.eventData.key,callback:function(t){e.$set(e.item_now.rawFilter.eventData,"key",t)},expression:"item_now.rawFilter.eventData.key"}},e._l(e.eventDataOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"comparator",filterable:""},model:{value:e.item_now.rawFilter.eventData.comparator,callback:function(t){e.$set(e.item_now.rawFilter.eventData,"comparator",t)},expression:"item_now.rawFilter.eventData.comparator"}},e._l(e.comparatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-input",{attrs:{placeholder:"value"},model:{value:e.item_now.rawFilter.eventData.value,callback:function(t){e.$set(e.item_now.rawFilter.eventData,"value",t)},expression:"item_now.rawFilter.eventData.value"}})],1)]):e._e()],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelUpdateItem}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateItem}},[e._v("Confirm")])],1)],1)],1)],2)},C=[],j=function(){var e=this,t=e._self._c;return t("span",[t("el-select",{staticStyle:{width:"125px"},attrs:{placeholder:"prefix"},model:{value:e.value.locationPreposition,callback:function(t){e.$set(e.value,"locationPreposition",t)},expression:"value.locationPreposition"}},e._l(e.locationPrepositionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"location"},model:{value:e.value.location,callback:function(t){e.$set(e.value,"location",t)},expression:"value.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},E=[],S={props:["value"],data(){return{locationOptions:h,locationPrepositionOptions:k}},mounted(){},watch:{},methods:{refresh(){this.$forceUpdate(),this.$emit("input",this.value)},getResult(){return this.value.locationPreposition+" "+this.value.location}}},D=S,A=(0,u.Z)(D,j,E,!1,null,null,null),U=A.exports;const P={event_type:"",filter:"",rawFilter:{location:{locationPreposition:"",location:""},timestamp:{comparator:"",value:""},objectId:"",objectIdOperator:"",eventData:{key:"",comparator:"",value:""}},filterList:[]};var F={props:["value"],components:{LocationInput:U},watch:{"item_now.rawFilter":{handler(e,t){var i="";this.item_now.filterList.includes("location")&&(i+=`location ${e.location.locationPreposition} ${e.location.location},`),this.item_now.filterList.includes("timestamp")&&(i+=`timestamp ${e.timestamp.comparator} ${e.timestamp.value},`),this.item_now.filterList.includes("objectId")&&(i+=`objectId ${e.objectIdOperator} ${e.objectId},`),this.item_now.filterList.includes("eventData")&&(i+=`eventData.${e.eventData.key} ${e.eventData.comparator} ${e.eventData.value},`),this.item_now.filter=i},immediate:!0,deep:!0}},data(){return{dialogEditorVisible:!1,itemIndex:-1,item_now:JSON.parse(JSON.stringify(P)),resultList:[],comparatorOptions:x,eventTypeNameOptions:v,objectIdOptions:O,objectIdOperatorOptions:$,eventDataOptions:b}},mounted(){this.resultList=this.value},methods:{test(){},getResult(){const e={event_type:[],filter:[]};return this.resultList.forEach((t=>{e.event_type.push(t.event_type);const i=[];if(t.filterList.includes("location")){const e=t.rawFilter.location.locationPreposition;i.push(`location ${e} ${t.rawFilter.location.location}`)}t.filterList.includes("timestamp")&&i.push(`timestamp ${t.rawFilter.timestamp.comparator} ${t.rawFilter.timestamp.value}`),t.filterList.includes("objectId")&&i.push(`objectId ${t.rawFilter.objectIdOperator} ${t.rawFilter.objectId}`),t.filterList.includes("eventData")&&i.push(`event_data.${t.rawFilter.eventData.key} ${t.rawFilter.eventData.comparator} ${t.rawFilter.eventData.value},`),e.filter.push(i.join(","))})),e},handleCommand(e){this.item_now.filterList.includes(e)||this.item_now.filterList.push(e)},refresh(){this.$forceUpdate(),this.$emit("input",this.resultList)},openEditor(e,t){e&&t>=0&&(this.item_now=JSON.parse(JSON.stringify(e)),this.itemIndex=t),this.dialogEditorVisible=!0},removeItem(e){this.resultList.splice(e,1),this.refresh()},updateItem(){-1!==this.itemIndex?this.resultList[this.itemIndex]=this.item_now:this.resultList.push(this.item_now),this.cancelUpdateItem()},cancelUpdateItem(){this.item_now=JSON.parse(JSON.stringify(P)),this.itemIndex=-1,this.dialogEditorVisible=!1,this.refresh()}}},N=F,R=(0,u.Z)(N,T,C,!1,null,"5fff4c48",null),V=R.exports,J=function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"title"},[e._v("Action")]),t("el-alert",{attrs:{title:"Execute the corresponding action according to the current and previous conditions.",type:"success",closable:!1}}),e._l(e.resultList,(function(i,o){return t("div",{key:o},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"Action "+(o+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.openEditor(i,o)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(o)}}})],1),t("el-descriptions-item",{attrs:{label:"action_name"}},[e._v(e._s(i.action.action_name)+" ")]),t("el-descriptions-item",{attrs:{label:"conditions"}},[e._l(i.history_condition,(function(i,o){return t("span",{key:"hc"+o},[e._v(" "+e._s(`${0===o?"where ":i.logicalOperator} ${i.name} ${i.comparator} ${i.value}`)+" ")])})),e._l(i.current_condition,(function(i,o){return t("span",{key:"cc"+o},[e._v(" "+e._s(`${0===o?"where ":i.logicalOperator} ${i.location.locationPreposition}_${i.location.location}.${i.property.join(".")} ${i.comparator} ${i.value}`)+" ")])}))],2),t("el-descriptions-item",{attrs:{label:"location"}},e._l(i.action.action_location,(function(i,o){return t("span",{key:o},[e._v(" "+e._s(`${i.locationPreposition} ${i.location},`)+" ")])})),0),t("el-descriptions-item",{attrs:{label:"action_param"}},[e._v(e._s(i.action.action_param)+" ")])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openEditor()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add Action")])]),t("el-dialog",{attrs:{title:"Action",visible:e.dialogEditorVisible},on:{"update:visible":function(t){e.dialogEditorVisible=t},close:e.cancelUpdateItem}},[t("el-form",{attrs:{model:e.item_now,"label-width":"auto"}},[t("div",[e._v(" Conditional judgement ")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addHistoryCondition}},[e._v("Add History Condition")]),e._l(e.item_now.history_condition,(function(i,o){return t("el-form-item",{key:"hc"+o,attrs:{label:"history_condition"}},[0===o?t("span",[e._v("Where ")]):e._e(),o>0?t("el-select",{staticStyle:{width:"60px"},attrs:{filterable:""},model:{value:i.logicalOperator,callback:function(t){e.$set(i,"logicalOperator",t)},expression:"c.logicalOperator"}},e._l(e.logicalOperatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{filterable:"",placeholder:"func"},model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"c.name"}},e._l(e.computedResultList,(function(e){return t("el-option",{key:e.result_name,attrs:{label:e.result_name,value:e.result_name}})})),1),t("el-select",{staticStyle:{width:"60px"},attrs:{placeholder:"comparator"},model:{value:i.comparator,callback:function(t){e.$set(i,"comparator",t)},expression:"c.comparator"}},e._l(e.comparatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-input",{attrs:{placeholder:"expect value"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"c.value"}}),t("el-button",{attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(t){return t.preventDefault(),e.removeHistoryCondition(i)}}})],1)})),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addCurrentCondition}},[e._v("Add Current Condition")]),e._l(e.item_now.current_condition,(function(i,o){return t("el-form-item",{key:"cc"+o,attrs:{label:"current_condition"}},[0===o?t("span",[e._v("Where ")]):e._e(),o>0?t("el-select",{staticStyle:{width:"60px"},attrs:{filterable:"",placeholder:"Operator"},model:{value:i.logicalOperator,callback:function(t){e.$set(i,"logicalOperator",t)},expression:"c.logicalOperator"}},e._l(e.logicalOperatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("LocationInput",{model:{value:i.location,callback:function(t){e.$set(i,"location",t)},expression:"c.location"}}),t("el-cascader",{attrs:{options:e.LocationPropertyOptions,props:{expandTrigger:"hover"},clearable:"",filterable:"",placeholder:"property",separator:"."},model:{value:i.property,callback:function(t){e.$set(i,"property",t)},expression:"c.property"}}),t("el-select",{staticStyle:{width:"60px"},attrs:{placeholder:"comparator"},model:{value:i.comparator,callback:function(t){e.$set(i,"comparator",t)},expression:"c.comparator"}},e._l(e.comparatorOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-input",{attrs:{placeholder:"expect value"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"c.value"}}),t("el-button",{attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(t){return t.preventDefault(),e.removeCurrentCondition(i)}}})],1)})),t("el-divider"),t("div",[e._v(" Action selection ")]),t("el-form-item",{attrs:{label:"action_name"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.item_now.action.action_name,callback:function(t){e.$set(e.item_now.action,"action_name",t)},expression:"item_now.action.action_name"}},e._l(e.actionOptions,(function(e,i){return t("el-option",{key:i,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addLocation}},[e._v("Add Action Location")]),e._l(e.item_now.action.action_location,(function(i,o){return t("el-form-item",{key:"loc"+o,attrs:{label:"action_location"}},[t("LocationInput",{attrs:{value:i}}),t("el-button",{attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(t){return t.preventDefault(),e.removeLocation(i)}}})],1)})),t("el-form-item",{attrs:{label:"action_param"}},[t("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:""},model:{value:e.item_now.action.action_param,callback:function(t){e.$set(e.item_now.action,"action_param",t)},expression:"item_now.action.action_param"}},e._l(e.computedResultList,(function(e){return t("el-option",{key:e.result_name,attrs:{label:e.result_name,value:e.result_name}})})),1)],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelUpdateItem}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateItem}},[e._v("Confirm")])],1)],1)],1)],2)},z=[];const H=new o["default"];var W=H;const M={current_condition:[],history_condition:[],action:{action_name:"",action_location:[],action_param:[]}};var Z={props:["value","computedResultList"],components:{LocationInput:U,LocationInput:U},data(){return{dialogEditorVisible:!1,itemIndex:-1,item_now:JSON.parse(JSON.stringify(M)),resultList:[],actionLocationOptions:[],historyLength:0,eventTypeNameOptions:v,locationOptions:h,actionOptions:f,comparatorOptions:x,logicalOperatorOptions:I,LocationPropertyOptions:w}},mounted(){this.resultList=this.value,this.actionLocationOptions.push({value:"trigger_location",label:"trigger_location"}),this.actionLocationOptions.push(...this.locationOptions)},watch:{historyLength:{handler:(e,t)=>{0===e?W.$emit("hasHistory",!1):1===e&&0===t&&W.$emit("hasHistory",!0)}}},methods:{test(){},getResult(){const e=[];return this.resultList.forEach((t=>{const i=[];t.action.action_location.forEach((e=>{"is"===e.locationPreposition?i.push(e.location):i.push(e.locationPreposition+" "+e.location)}));var o="";t.history_condition.forEach(((e,t)=>{if(t>0){const t="and"===e.logicalOperator?"&":"|";o+=t}o+=e.name+e.comparator+e.value}));var a="";t.current_condition.forEach(((e,t)=>{if(t>0){const t="and"===e.logicalOperator?"&":"|";a+=t}const i="is"===e.location.locationPreposition?e.location.location:e.location.locationPreposition+"_"+e.location.location;a+=i+"."+e.property.join(".")+e.comparator+e.value}));const n={action_name:t.action.action_name,action_location:i,action_param:t.action.action_param.join(",")};e.push({history_condition:o,current_condition:a,action:n})})),e},refresh(){this.$forceUpdate(),this.$emit("input",this.resultList)},openEditor(e,t){e&&t>=0&&(this.item_now=JSON.parse(JSON.stringify(e)),this.itemIndex=t),this.dialogEditorVisible=!0},removeItem(e){this.resultList.splice(e,1),this.updateHistoryLength(),this.refresh()},updateItem(){-1!==this.itemIndex?this.resultList[this.itemIndex]=this.item_now:this.resultList.push(this.item_now),this.updateHistoryLength(),this.cancelUpdateItem()},cancelUpdateItem(){this.item_now=JSON.parse(JSON.stringify(M)),this.itemIndex=-1,this.dialogEditorVisible=!1,this.refresh()},updateHistoryLength(){let e=0;this.resultList.forEach((t=>{e+=t.history_condition.length})),this.historyLength=e},addHistoryCondition(){const e={logicalOperator:"or",name:"",comparator:"",value:""};this.item_now.history_condition.push(e)},removeHistoryCondition(e){this.item_now.history_condition.splice(this.item_now.history_condition.indexOf(e),1)},addCurrentCondition(){const e={logicalOperator:"or",location:{locationPreposition:"",location:""},property:[],comparator:"",value:""};this.item_now.current_condition.push(e)},removeCurrentCondition(e){this.item_now.current_condition.splice(this.item_now.current_condition.indexOf(e),1)},addLocation(){this.item_now.action.action_location.push({locationPreposition:"",location:""})},removeLocation(e){this.item_now.action.action_location.splice(this.item_now.action.action_location.indexOf(e),1)}}},G=Z,q=(0,u.Z)(G,J,z,!1,null,"1b8d38ac",null),B=q.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"title"},[e._v("Scenario Description")]),e._l(e.resultList,(function(i,o){return t("div",{key:o},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"historyEvent "+(o+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.openEditor(i,o)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(o)}}})],1),t("el-descriptions-item",{attrs:{label:"name"}},[e._v(e._s(i.name))]),t("el-descriptions-item",{attrs:{label:"location"}},e._l(i.location,(function(i,o){return t("span",{key:o},[e._v(" "+e._s(i.locationPreposition+" "+i.location+",")+" ")])})),0),t("el-descriptions-item",{attrs:{label:"timezone"}},[e._v(" "+e._s((i.startTime?`last ${i.startTime} `:"")+i.startTimeUnit+" ~ "+(i.endTime?`last ${i.endTime} `:"")+i.endTimeUnit)+" ")]),t("el-descriptions-item",{attrs:{label:"objectId"}},[e._v(e._s(i.objectId))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openEditor()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add Description")])]),t("el-dialog",{attrs:{title:"Scenario Description",visible:e.dialogEditorVisible},on:{"update:visible":function(t){e.dialogEditorVisible=t},close:e.cancelUpdateItem}},[t("el-form",{attrs:{model:e.item_now,"label-width":"auto"}},[t("el-form-item",{attrs:{label:"name"}},[t("el-select",{attrs:{placeholder:"name"},model:{value:e.item_now.name,callback:function(t){e.$set(e.item_now,"name",t)},expression:"item_now.name"}},e._l(e.eventTypeNameOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,filterable:""}})})),1)],1),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addLocation}},[e._v("Add Location")]),e._l(e.item_now.location,(function(i,o){return t("el-form-item",{key:o,attrs:{label:"location"}},[t("LocationInput",{attrs:{value:i}}),t("el-button",{attrs:{icon:"el-icon-delete",size:"mini"},on:{click:function(t){return t.preventDefault(),e.removeLocation(i)}}})],1)})),t("el-form-item",{attrs:{label:"startTime"}},["today"!==e.item_now.startTimeUnit&&"this week"!==e.item_now.startTimeUnit?t("span",[t("span",[e._v("last ")]),t("el-input-number",{attrs:{"controls-position":"right",min:1},on:{change:function(e){}},model:{value:e.item_now.startTime,callback:function(t){e.$set(e.item_now,"startTime",t)},expression:"item_now.startTime"}})],1):e._e(),t("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"unit"},model:{value:e.item_now.startTimeUnit,callback:function(t){e.$set(e.item_now,"startTimeUnit",t)},expression:"item_now.startTimeUnit"}},[t("el-option",{attrs:{label:"times",value:"times"}}),t("el-option",{attrs:{label:"min",value:"min"}}),t("el-option",{attrs:{label:"today",value:"today"}}),t("el-option",{attrs:{label:"this week",value:"this week"}})],1)],1),t("el-form-item",{attrs:{label:"endTime"}},["trigger_timestamp"!==e.item_now.endTimeUnit?t("span",[t("span",[e._v("last ")]),t("el-input-number",{attrs:{"controls-position":"right",min:1},on:{change:function(e){}},model:{value:e.item_now.endTime,callback:function(t){e.$set(e.item_now,"endTime",t)},expression:"item_now.endTime"}})],1):e._e(),t("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"unit"},model:{value:e.item_now.endTimeUnit,callback:function(t){e.$set(e.item_now,"endTimeUnit",t)},expression:"item_now.endTimeUnit"}},[t("el-option",{attrs:{label:"min",value:"min"}}),t("el-option",{attrs:{label:"trigger_timestamp",value:"trigger_timestamp"}})],1)],1),t("el-form-item",{attrs:{label:"objectId"}},[t("el-select",{attrs:{placeholder:"unit",multiple:"",filterable:""},model:{value:e.item_now.objectId,callback:function(t){e.$set(e.item_now,"objectId",t)},expression:"item_now.objectId"}},e._l(e.objectIdOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelUpdateItem}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateItem}},[e._v("Confirm")])],1)],1)],1)],2)},Q=[];const X={name:"",location:[],startTime:"",startTimeUnit:"min",endTime:"",endTimeUnit:"trigger_timestamp",objectId:[]};var Y={props:["value"],components:{LocationInput:U},data(){return{dialogEditorVisible:!1,itemIndex:-1,item_now:JSON.parse(JSON.stringify(X)),resultList:[],objectIdOptions:O,locationOptions:h,eventTypeNameOptions:v}},watch:{"item_now.startTimeUnit":{handler(e,t){"today"!==e&&"this week"!==e||(this.item_now.startTime="")},immediate:!0,deep:!1},"item_now.endTimeUnit":{handler(e,t){"trigger_timestamp"===e&&(this.item_now.endTime="")},immediate:!0,deep:!1}},mounted(){this.resultList=this.value},methods:{test(){},getResult(){const e={event_list:[],location:[],time_zone:[],object_id:[]};return this.resultList.forEach((t=>{e.event_list.push(t.name),e.object_id.push(t.objectId),e.location.push(t.location.map((e=>"is"===e.locationPreposition?e.location:`${e.locationPreposition} ${e.location}`)));const i="times"===t.startTimeUnit?"times":"time";var o="";o="today"===t.startTimeUnit||"this week"===t.startTimeUnit?t.startTimeUnit:`last ${t.startTime} ${t.startTimeUnit}`;const a="trigger_timestamp"===t.endTimeUnit?"trigger_timestamp":`last ${t.endTime} ${t.endTimeUnit}`;e.time_zone.push({type:i,start_time:o,end_time:a})})),e},refresh(){this.$forceUpdate(),this.$emit("input",this.resultList)},openEditor(e,t){e&&t>=0&&(this.item_now=JSON.parse(JSON.stringify(e)),this.itemIndex=t),this.dialogEditorVisible=!0},removeItem(e){this.resultList.splice(e,1),this.refresh()},updateItem(){-1!==this.itemIndex?this.resultList[this.itemIndex]=this.item_now:this.resultList.push(this.item_now),this.cancelUpdateItem()},cancelUpdateItem(){this.item_now=JSON.parse(JSON.stringify(X)),this.itemIndex=-1,this.dialogEditorVisible=!1,this.refresh()},addLocation(){this.item_now.location.push({locationPreposition:"",location:""})},removeLocation(e){this.item_now.location.splice(this.item_now.location.indexOf(e),1)}}},ee=Y,te=(0,u.Z)(ee,K,Q,!1,null,"3880a736",null),ie=te.exports,oe=function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"title"},[e._v("Scenario Computing")]),e._l(e.resultList,(function(i,o){return t("div",{key:o},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"Computing "+(o+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.openEditor(i,o)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(o)}}})],1),t("el-descriptions-item",{attrs:{label:"function_name"}},[e._v(e._s(i.function_name))]),t("el-descriptions-item",{attrs:{label:"param"}},[e._v(e._s(i.param))]),t("el-descriptions-item",{attrs:{label:"result_name"}},[e._v(e._s(i.result_name))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openEditor()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add Computing")])]),t("el-dialog",{attrs:{title:"Scenario Computing",visible:e.dialogEditorVisible},on:{"update:visible":function(t){e.dialogEditorVisible=t},close:e.cancelUpdateItem}},[t("el-form",{attrs:{model:e.item_now,"label-width":"auto"}},[t("el-form-item",{attrs:{label:"function_name"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.item_now.function_name,callback:function(t){e.$set(e.item_now,"function_name",t)},expression:"item_now.function_name"}},e._l(e.functionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"param"}},[t("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:""},model:{value:e.item_now.param,callback:function(t){e.$set(e.item_now,"param",t)},expression:"item_now.param"}},e._l(e.historyEventList,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"result_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.item_now.result_name,callback:function(t){e.$set(e.item_now,"result_name",t)},expression:"item_now.result_name"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelUpdateItem}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateItem}},[e._v("Confirm")])],1)],1)],1)],2)},ae=[],ne=1;const le={function_name:"",param:[],result_name:"func"};var re={props:["value","historyEventList"],data(){return{dialogEditorVisible:!1,itemIndex:-1,item_now:JSON.parse(JSON.stringify(le)),resultList:[],functionOptions:L}},mounted(){this.resultList=this.value},methods:{test(){},getResult(){const e=JSON.parse(JSON.stringify(this.resultList));return e.forEach((e=>{e.param=e.param.join(",")})),e},refresh(){this.$forceUpdate(),this.$emit("input",this.resultList)},openEditor(e,t){e&&t>=0?(this.item_now=JSON.parse(JSON.stringify(e)),this.itemIndex=t):this.item_now.result_name=this.item_now.result_name+ne,this.dialogEditorVisible=!0},removeItem(e){this.resultList.splice(e,1),this.refresh()},updateItem(){-1!==this.itemIndex?this.resultList[this.itemIndex]=this.item_now:(this.resultList.push(this.item_now),ne++),this.cancelUpdateItem()},cancelUpdateItem(){this.item_now=JSON.parse(JSON.stringify(le)),this.itemIndex=-1,this.dialogEditorVisible=!1,this.refresh()}}},se=re,ce=(0,u.Z)(se,oe,ae,!1,null,"6063be5a",null),ue=ce.exports,me=i(9669),pe=i.n(me),de=i(4720),_e=i.n(de);const ve=pe().create({headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:5e3});ve.interceptors.request.use((e=>e),(e=>(console.log(e),Promise.reject()))),ve.interceptors.response.use((e=>{if(200===e.status)return e.data;Promise.reject()}),(e=>(console.log(e),Promise.reject())));var fe=ve;const he=e=>fe({url:"/api/upload/dsl",method:"post",data:e});var be={name:"application",components:{triggerEditor:V,actionEditor:B,historyEventEditor:ie,computedResultEditor:ue,LocationInput:U},data(){return{triggerList:[],actionList:[],historyEventList:[],computedResultList:[],form:{user:"",app:""},rules:{user:[{required:!0,message:"please input your name.",trigger:"blur"}],app:[{required:!0,message:"Please select the application name.",trigger:"blur"}]},dialogVisible:!1,hasHistory:!1,startTime:0,appOptions:y}},watch:{},methods:{test(){const e=this.getResult();console.log("感知应用配置:"),console.log(e)},upload(){const e=this.getResult();console.log(e);const t={user:this.form.user,dsl:e,endTime:"",startTime:this.startTime,app:this.form.app};this.$refs.form.validate((e=>{e?(this.dialogVisible=!1,he(t).then((e=>{200===e.code?this.$message.success("Upload successfully!"):this.$message.error(e)}))):this.$message.warning("Please fill in the form correctly!")}))},getResult(){if(this.hasHistory){const e={Scenario_Trigger:this.$refs.trigger.getResult(),Scenario_Action:this.$refs.action.getResult(),Scenario_Description:this.$refs.history.getResult()};return e.Scenario_Description.result=this.$refs.computing.getResult(),e}{const e={Scenario_Trigger:this.$refs.trigger.getResult(),Scenario_Action:this.$refs.action.getResult(),Scenario_Description:{event_list:[],location:[[]],time_zone:[{type:"",start_time:"",end_time:""}],object_id:[],result:[{result_name:"",function_name:"",param:""}]}};return e}}},created(){},mounted(){this.startTime=(new Date).getTime(),W.$on("hasHistory",(e=>{this.hasHistory=e,this.hasHistory&&this.$message.warning("Please fill in the history event and computing result!")}))}},ge=be,we=(0,u.Z)(ge,d,_,!1,null,"9d726c00",null),ye=we.exports,ke={name:"app",components:{HelloWorld:p,application:ye}},Oe=ke,Le=(0,u.Z)(Oe,a,n,!1,null,null,null),xe=Le.exports;o["default"].use(_e());var Ie=i(2346);o["default"].config.productionTip=!1,o["default"].use(Ie.Z,pe()),new o["default"]({render:function(e){return e(xe)}}).$mount("#app")}},t={};function i(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o](n,n.exports,i),n.loaded=!0,n.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,o,a,n){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],n=e[u][2];for(var r=!0,s=0;s<o.length;s++)(!1&n||l>=n)&&Object.keys(i.O).every((function(e){return i.O[e](o[s])}))?o.splice(s--,1):(r=!1,n<l&&(l=n));if(r){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,a,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,l=o[0],r=o[1],s=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(s)var u=s(i)}for(t&&t(o);c<l.length;c++)n=l[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(u)},o=self["webpackChunksctap_ui"]=self["webpackChunksctap_ui"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(2482)}));o=i.O(o)})();
//# sourceMappingURL=app.6c685ed9.js.map